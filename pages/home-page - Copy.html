<!--link rel="import" href="/bower_components/mark-down/mark-down.html"/>-->
<script src="/scripts/gettopics.js"></script>

<polymer-element name="home-page">
    <template>
    </template>
    
    <script>
        (function (){
            var prototype = {
                /*tolower: function (str){
                    return str.toLowerCase();
                },*/
                /*created: function (){
                    this.topics = [];
                },*/
                created: function (){
                    var t = this;
                    getTopics(function (topics){
                        // Generate html.
                        console.log("Generating...");
                        t.$.innerHTML = "<div cross-fade>";
                        for (var i = 0; i < topics.length; i++)
                        {
                            var topic = topics[i];
                            
                            t.$.innerHTML += "<h1>" + topic.name + "</h1>";
                            t.$.innerHTML += "<p>" + topic.description + "</p>";
                            t.$.innerHTML += "<ul>";
                            for (var j = 0; j < topic.pages.length; j++)
                            {
                                var page = topic.pages[j];
                                t.$.innerHTML += "<li><a href='/#/" + page.toLowerCase() + "'>" + page + "</a></li>";
                            }
                            t.$.innerHTML += "</ul>";
                        }
                        t.$.innerHTML += "</div>";
                        
                        console.log(t);
                        console.log(t.$);
                        console.log(t.$.innerHTML);
                    });
                }
            };

            Polymer(prototype);
        })();
    </script>
</polymer-element>